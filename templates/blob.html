{{template "head" .}}

<main class="container">
    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
        <h1 style="font-size: 20px;">
            <a href="/" style="color: var(--text-secondary);">repos</a>
            <span style="color: var(--text-secondary); margin: 0 4px;">/</span>
            <a href="/{{.RepoName}}">{{.RepoName}}</a>
        </h1>
        {{if .IsPublic}}
        <span class="badge badge-public">public</span>
        {{else}}
        <span class="badge badge-private">private</span>
        {{end}}
    </div>

    <nav style="display: flex; gap: 24px; border-bottom: 1px solid var(--border); margin-bottom: 16px;">
        <a href="/{{.RepoName}}/tree/{{.Ref}}/" class="active" style="padding: 8px 0; border-bottom: 2px solid var(--link); margin-bottom: -1px;">
            Files
        </a>
        <a href="/{{.RepoName}}/commits/{{.Ref}}" style="padding: 8px 0; color: var(--text-secondary);">
            Commits
        </a>
    </nav>

    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
        <select onchange="window.location.href='/{{.RepoName}}/blob/' + this.value + '/{{.Path}}'">
            {{range .Branches}}
            <option value="{{.}}" {{if eq . $.Ref}}selected{{end}}>{{.}}</option>
            {{end}}
        </select>

        <div style="display: flex; align-items: center; gap: 4px; color: var(--text-secondary);">
            <a href="/{{.RepoName}}/tree/{{.Ref}}/" style="color: var(--text-secondary);">{{.RepoName}}</a>
            {{range .Breadcrumbs}}
            <span>/</span>
            {{if .Path}}
            <a href="/{{$.RepoName}}/tree/{{$.Ref}}/{{.Path}}" style="color: var(--text-secondary);">{{.Name}}</a>
            {{else}}
            <span style="color: var(--text);">{{.Name}}</span>
            {{end}}
            {{end}}
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="color: var(--text-secondary);">
                <path d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z"/>
            </svg>
            <span style="font-weight: 600;">{{.FileName}}</span>
        </div>
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
                {{$lines := split .Content "\n"}}
                {{range $i, $line := $lines}}
                <tr>
                    <td style="padding: 0 16px; text-align: right; color: var(--text-secondary); user-select: none; vertical-align: top; border-right: 1px solid var(--border); background: var(--bg-secondary); min-width: 50px;">
                        {{add $i 1}}
                    </td>
                    <td style="padding: 0 16px; white-space: pre; font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;">{{$line}}</td>
                </tr>
                {{end}}
            </table>
        </div>
    </div>
</main>

{{template "footer" .}}
